<div class="body-content">
    <h2><%= title %></h2>

    <form id="form" onsubmit="return validateForm()" action="/equipment/<%= piece_of_equipment._id %>/update?_method=put" method="post">
        <fieldset class="form-group">
            <label for="name">Equipment Name:</label>
            <input class="form-control" name="name" id="name" type="text" value="<%= piece_of_equipment.name %>" required>
        </fieldset>

        <fieldset class="form-group">
            <label for="type">Type:</label>
            <select id="type" name="type" class="form-control" required>
            <option disabled>--Please select a type--</option>
                <% equipment_types.forEach(function(type) { %>
                    <option value="<%= type %>" <% if (piece_of_equipment.type === type) { %>selected<% } %>><%= type %></option>
                <% }); %>
            </select>
        </fieldset>

        <fieldset class="form-group">
            <label>Cost:</label>
            <input class="form-control" id="cost" name="cost" type="number" required value="<%= piece_of_equipment.cost %>" step="0.01">
        </fieldset>

        <fieldset class="form-group">
            <label for="room">Room:</label>
            <select id="room" name="room" class="form-control" required>
                <option disabled>--Please select a room--</option>
                <% room_list.forEach(function(room) { %>
                    <option value="<%= room._id %>" <% if (piece_of_equipment.room.equals(room._id)) { %>selected<% } %>><%= room.name %></option>
                <% }); %>
            </select>
        </fieldset>

        <fieldset class="form-group">
            <label for="reg_name">Your name:</label>
            <input class="form-control" name="reg_name" id="reg_name" type="text" value="<%= piece_of_equipment.registeredBy %> " required>
        </fieldset>

        <!-- <input type="hidden" name="dateUpdated" id="dateUpdated" value="<%= new Date().toISOString() %>"> -->
 
        <div class="btn-submit-layout">
            <button class="btn-update-submit" type="submit">Submit</button>
        </div>
    </form>

    <script>
        function validateForm() {
            const name = document.getElementById('name').value.trim();
            const reg_name = document.getElementById('reg_name').value.trim();
            if (name.length < 1 ||  reg_name.length < 1) {
                alert("Entered value must be at least 1 non-space characters long.");
                return false; // prevents form submission
            }
            return true; // allows form submission
        }
    </script>
</div>